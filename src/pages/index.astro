---
import BlogCard from '@/components/BlogCard.astro'
import Container from '@/components/Container.astro'
import Link from '@/components/Link.astro'
import { buttonVariants } from '@/components/ui/button'
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from '@/components/ui/card'
import { SITE } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { getCollection } from 'astro:content'

const blog = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE)
---

<Layout title="Home" description={SITE.DESCRIPTION}>
  <Container class="flex flex-col gap-y-6">
    <section>
      <Link
        href="https://nostrapp.link/note1tsq7atkerufde5tyxzxl8ufpy2slle2q3mgujs5au3j4jqe50anss3rezu"
        external
      >
        <Card className="hover:bg-secondary/50">
          <CardHeader>
            <CardTitle className="text-3xl">Slow down,</CardTitle>
            <CardDescription
              ><span class="font-semibold">and be patient with life.</span
              ></CardDescription
            >
          </CardHeader>
          <CardContent>
            <p class="mb-2 text-sm text-muted-foreground">
              "If you are looking for wealth, somebody else is looking for
              health. If you are looking for health, somebody else just died.
              Each time a new mansion springs from the earth, a new grave is dug
              below the earth. Each time you throw food into dust bin, someone
              else is looking for remnant to eat. For each smile on the planet,
              there's a drop of tear in another place on the planet. For each
              celebration of childbirth, there are tears of burial. Each time
              you urinate or drink water, remember, someone is using pipe for
              the same purpose. So, always be thankful. Think of the goodness
              you have, rather than the vanities you long for." â€” Human, Earth.
            </p>
          </CardContent>
        </Card>
      </Link>
    </section>
    <section class="flex flex-col gap-y-4">
      <h2 class="text-2xl font-bold">Latest posts</h2>
      <ul class="not-prose flex flex-col gap-y-4">
        {
          blog.map((post) => (
            <li>
              <BlogCard entry={post} />
            </li>
          ))
        }
      </ul>
      <div class="flex justify-center">
        <Link
          href="/blog"
          class={buttonVariants({ variant: 'ghost' }) + ' group'}
        >
          See all posts <span
            class="ml-1.5 transition-transform group-hover:translate-x-1"
            >&rarr;</span
          >
        </Link>
      </div>
    </section>
  </Container>
</Layout>
